"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[946],{2116:function(e,t,s){s.d(t,{Z:function(){return f}});var i=s(3396),l=s(7139);const n=e=>((0,i.dD)("data-v-d5e95310"),e=e(),(0,i.Cn)(),e),o={key:0,class:"popup"},a={class:"mask"},p={class:"content"},d={class:"topbar"},c={class:"dialog-tit"},r={t:"1501234940517",class:"icon",style:{},viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3014","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"20",height:"20"},u=n((()=>(0,i._)("path",{d:"M941.576 184.248l-101.824-101.824L512 410.176 184.248 82.424 82.424 184.248 410.168 512l-327.744 327.752 101.824 101.824L512 613.824l327.752 327.752 101.824-101.824L613.832 512z",fill:"#cdcdcd","p-id":"3015"},null,-1))),g=[u],m={class:"s-content"};function h(e,t,s,n,u,h){return s.open?((0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",a,[(0,i._)("div",p,[(0,i._)("div",d,[(0,i._)("div",c,[(0,i._)("h4",null,(0,l.zw)(s.title),1)]),(0,i._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>h.close&&h.close(...e))},[((0,i.wg)(),(0,i.iD)("svg",r,g))])]),(0,i._)("div",m,[(0,i.WI)(e.$slots,"content",{},void 0,!0)])])])])):(0,i.kq)("",!0)}var v={props:{open:{type:Boolean,default:!1},title:{type:String,default:"管理收货地址"}},methods:{close(){this.$emit("close")}}},w=s(89);const _=(0,w.Z)(v,[["render",h],["__scopeId","data-v-d5e95310"]]);var f=_},8341:function(e,t,s){s.d(t,{Z:function(){return u}});var i=s(3396),l=s(7139);const n={class:"gray-box"},o={class:"title"},a={class:"con"};function p(e,t,s,p,d,c){return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",o,[(0,i._)("h2",null,(0,l.zw)(s.title),1),(0,i._)("div",null,[(0,i.WI)(e.$slots,"right",{},void 0,!0)])]),(0,i._)("div",a,[(0,i.WI)(e.$slots,"content",{},void 0,!0)])])}var d={props:["title"]},c=s(89);const r=(0,c.Z)(d,[["render",p],["__scopeId","data-v-9355dd7c"]]);var u=r},3946:function(e,t,s){s.r(t),s.d(t,{default:function(){return H}});var i=s(3396),l=s(7139),n=s(9242);const o=e=>((0,i.dD)("data-v-1a316d74"),e=e(),(0,i.Cn)(),e),a=o((()=>(0,i._)("div",{class:"table-title"},[(0,i._)("span",{class:"name"},"图片"),(0,i._)("span",{class:"name"},"时间"),(0,i._)("span",{class:"name"},"物品名称"),(0,i._)("span",{class:"name"},"单价"),(0,i._)("span",{class:"name"},"状态"),(0,i._)("span",{class:"descr"},"简介")],-1))),p={key:0,"element-loading-text":"加载中...",style:{"min-height":"10vw"}},d={class:"img-box"},c=["src"],r={class:"time"},u={class:"name"},g={class:"price"},m={key:0,class:"number"},h={key:1,class:"number"},v={key:2,class:"number"},w={class:"descr"},_={key:1},f={style:{padding:"80px 0","text-align":"center"}},y=o((()=>(0,i._)("div",{style:{"font-size":"20px"}},"你还未添加物品",-1))),k={style:{margin:"20px"}},b={class:"i"},x={class:"i"},D={class:"i"},L=o((()=>(0,i._)("div",{class:"el-upload__tip"}," jpg/png files with a size less than 500kb ",-1)));function C(e,t,s,o,C,Z){const z=(0,i.up)("y-button"),W=(0,i.up)("y-shelf"),O=(0,i.up)("el-button"),$=(0,i.up)("el-upload"),B=(0,i.up)("y-popup"),I=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(W,{title:"书籍上传"},{right:(0,i.w5)((()=>[C.loading?((0,i.wg)(),(0,i.j4)(z,{key:0,text:"上传物品",classStyle:"disabled-btn",style:{margin:"0"}})):((0,i.wg)(),(0,i.j4)(z,{key:1,text:"上传物品",style:{margin:"0"},onBtnClick:t[0]||(t[0]=e=>Z.post())}))])),content:(0,i.w5)((()=>[a,C.flag?(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",p,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.addList,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"address-item",key:t},[(0,i._)("div",d,[(0,i._)("img",{src:e.picurl1,alt:""},null,8,c)]),(0,i._)("div",r,(0,l.zw)(e.time),1),(0,i._)("div",u,(0,l.zw)(e.name),1),(0,i._)("div",g,"￥"+(0,l.zw)(e.price),1),1===e.status?((0,i.wg)(),(0,i.iD)("div",m,"上架")):2===e.status?((0,i.wg)(),(0,i.iD)("div",h," 预定 ")):((0,i.wg)(),(0,i.iD)("div",v," 完成 ")),(0,i._)("div",w,(0,l.zw)(e.comment),1)])))),128))])),[[I,C.loading]]):((0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("div",f,[y,(0,i._)("div",k,[(0,i.Wm)(z,{text:"上传物品",onBtnClick:t[1]||(t[1]=e=>Z.post())})])])]))])),_:1}),(0,i.Wm)(B,{open:o.popupOpen,onClose:t[7]||(t[7]=e=>o.popupOpen=!o.popupOpen),title:o.popupTitle},{content:(0,i.w5)((()=>[(0,i._)("div",b,[(0,i.wy)((0,i._)("input",{type:"text",placeholder:"物品名","onUpdate:modelValue":t[2]||(t[2]=e=>o.msg.name=e)},null,512),[[n.nr,o.msg.name]])]),(0,i._)("div",x,[(0,i.wy)((0,i._)("input",{type:"range ",placeholder:"物品单价","onUpdate:modelValue":t[3]||(t[3]=e=>o.msg.price=e)},null,512),[[n.nr,o.msg.price]])]),(0,i._)("div",D,[(0,i.wy)((0,i._)("input",{type:"text",placeholder:"物品简介","onUpdate:modelValue":t[4]||(t[4]=e=>o.msg.descr=e)},null,512),[[n.nr,o.msg.descr]])]),(0,i.Wm)($,{"file-list":o.fileList,"onUpdate:fileList":t[5]||(t[5]=e=>o.fileList=e),class:"upload-demo","http-request":o.uploadFile,action:"#","list-type":"picture"},{tip:(0,i.w5)((()=>[L])),default:(0,i.w5)((()=>[(0,i.Wm)(O,{type:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)("Click to upload")])),_:1})])),_:1},8,["file-list","http-request"]),(0,i.Wm)(z,{text:"保存",class:"btn",classStyle:"main-btn",onBtnClick:t[6]||(t[6]=e=>Z.save({name:o.msg.name,descr:o.msg.descr,price:o.msg.price}))})])),_:1},8,["open","title"])])}s(7658);var Z=s(4870),z=s(4161),W=s(8341),O=s(4405),$=s(2116),B=s(7746),I=s(7247),N={components:{YShelf:W.Z,YButton:O.Z,YPopup:$.Z,axios:z.Z,setStore:I.PQ,getStore:I.bh},watch:{},setup(){const e=(0,I.bh)("id"),t=(0,Z.iH)(!1),s=(0,Z.iH)([]),i=(0,Z.iH)("书籍详情"),l=(0,Z.iH)([]),n=()=>{console.log("update");let t={id:e};(0,B.rd)(t).then((e=>{s.value=e}))},o=()=>{var e=new Date,t=e.getFullYear(),s=e.getMonth()+1,i=e.getDate();return t+"-"+s+"-"+i},a=()=>{let e={timeout:3e4,headers:{"Content-Type":"multipart/form-data"}},t=new FormData;t.append("user_id","1"),t.append("name",d.name),console.log(l.value.length),l&&l.value.forEach(((e,s)=>{t.append("file",e.raw),console.log(s),console.log(e.name)})),z.Z.post("/api/Upload",t,e).then((async e=>{let t=e.data.data;console.log(t),console.log("--------------");let s={picurl1:t[0],picurl2:t[1],name:d.name,picurl3:t[2],price:d.price,comment:d.descr,category:1,uid:(0,I.bh)("id"),email:(0,I.bh)("email"),time:d.time,status:1};await(0,B.CJ)(s).then((e=>{console.log(e)}))}))},p=e=>{e.time=o(),s.value.push(e)},d={img:"",time:"2023-01-02",name:"",descr:"",price:"",number:1},c=()=>{console.log("-------")};return{id:e,popupOpen:t,id:e,addList:s,popupTitle:i,fileList:l,msg:d,insertGood:p,uploadFile:c,showTime:o,update:n,upload:a}},data(){return{loading:!0,flag:!0,saveflag:!1}},created(){this.id?this.init_goodsList():(this.note_fail(),this.id=(0,I.bh)("id"))},methods:{note_success(){this.$notify({title:"商品信息",message:"加载成功",type:"success",position:"top-right"})},note_fail(){this.$notify({title:"商品信息",message:"加载失败,未登录",type:"error",position:"top-right"})},post(){this.popupOpen=!this.popupOpen},showNotNull(){this.loading=!1},showNull(){this.loading=!1,this.flag=!1},init_goodsList(){console.log("init_goodsList");let e={id:this.id};(0,B.rd)(e).then((e=>{this.addList=e,console.log(e.length),console.log(e),this.addList.length?(console.log("herer"),this.showNotNull()):this.showNull()}))},save(e){this.msg.descr=e.descr,this.msg.price=e.price,this.msg.name=e.name,this.msg.time=this.showTime(),console.log(this.msg),this.upload(),this.saveflag=!this.saveflag,this.popupOpen=!this.popupOpen,this.$router.push({path:"/user/information"})}}},S=s(89);const U=(0,S.Z)(N,[["render",C],["__scopeId","data-v-1a316d74"]]);var H=U}}]);
//# sourceMappingURL=946.b14fc372.js.map